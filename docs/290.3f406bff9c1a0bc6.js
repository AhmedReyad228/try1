"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[290],{5290:(h,p,s)=>{s.r(p),s.d(p,{CartComponent:()=>x});var u=s(6814),m=s(1120),t=s(4769),C=s(6286),a=s(2425);function b(c,g){if(1&c){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._UZ(2,"img",11),t.qZA(),t.TgZ(3,"div",12)(4,"div",3)(5,"div")(6,"h4",13),t._uU(7),t.qZA(),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"button",15,16),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.MAs(12),l=t.oxw(2);return t.KtG(l.deleteProduct(n.product._id,_))}),t._UZ(13,"i",17),t._uU(14," Remove "),t.qZA()(),t.TgZ(15,"div",18)(16,"button",19,20),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.MAs(17),l=t.oxw(2);return t.KtG(l.updateCart(n.product._id,n.count-1,_))}),t._uU(18," - "),t.qZA(),t.TgZ(19,"span",21),t._uU(20),t.qZA(),t.TgZ(21,"button",19,22),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.MAs(22),l=t.oxw(2);return t.KtG(l.updateCart(n.product._id,n.count+1,_))}),t._uU(23," + "),t.qZA()()()(),t._UZ(24,"hr",23),t.qZA()}if(2&c){const e=g.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(5),t.Oqu(e.product.title),t.xp6(2),t.hij(" Price: ",t.xi3(10,5,e.price," EGP ")," "),t.xp6(11),t.Oqu(e.count)}}const i=function(c){return["/Ecommerce/checkout",c]};function d(c,g){if(1&c){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h2"),t._uU(3,"Shop Cart"),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearCart())}),t._uU(5,"Clear Cart"),t.qZA()(),t.TgZ(6,"p",5),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.YNc(9,b,25,8,"div",6),t.TgZ(10,"button",7),t._uU(11," Online Payment "),t._UZ(12,"img",8),t.qZA()()}if(2&c){const e=t.oxw();t.xp6(7),t.hij(" Total Price: ",t.xi3(8,3,e.productsAdded.totalCartPrice," EGP ")," "),t.xp6(2),t.Q6J("ngForOf",e.productsAdded.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,i,e.productsAdded._id))}}function v(c,g){1&c&&(t.TgZ(0,"div",23)(1,"h2",24),t._uU(2,"Your Cart is Empty"),t.qZA(),t._UZ(3,"img",25),t.qZA())}let x=(()=>{class c{constructor(e,r,o){this._CartService=e,this._ToastrService=r,this._Renderer2=o,this.productsAdded=null}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{this.productsAdded=e.data},error:e=>{console.log(e)}})}updateCart(e,r,o){this._Renderer2.setAttribute(o,"disabled","true"),r>0&&this._CartService.updateCart(e,r).subscribe({next:n=>{this.productsAdded=n.data,this._ToastrService.success("Quantity updated Successfully"),this._Renderer2.removeAttribute(o,"disabled")},error:n=>{console.log(n)}})}deleteProduct(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.removeProduct(e).subscribe({next:o=>{this.productsAdded=o.data,this._ToastrService.warning("Product Removed"),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(r,"disabled")}})}clearCart(){this._CartService.clearUserCart().subscribe({next:e=>{this.productsAdded=null,this._ToastrService.info("Cart Cleared"),this._CartService.cartNumber.next(0)},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(r){return new(r||c)(t.Y36(C.N),t.Y36(a._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","mx-auto w-75 bg-main-light rounded shadow p-4 my-4",4,"ngIf","ngIfElse"],["msg",""],[1,"mx-auto","w-75","bg-main-light","rounded","shadow","p-4","my-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"clear","p-1",3,"click"],[1,"text-danger"],["class","row g-4",4,"ngFor","ngForOf"],[1,"btn-main","p-1",3,"routerLink"],["src","./assets/images/visa.svg","alt",""],[1,"row","g-4"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11"],[1,"small"],[1,"text-danger","mb-0"],[1,"btn","text-main","p-0","m-0","fw-light",3,"click"],["removeProduct",""],[1,"fas","fa-trash-can"],[1,"d-flex","justify-content-center","align-items-center"],[1,"update",3,"click"],["clicked",""],[1,"mx-1"],["decrease",""],[1,"my-3"],[1,"text-danger","text-center"],["src","./assets/images/Empty_Shopping_Cart_blog.webp","alt","Empty Cart",1,"mx-auto","d-block"]],template:function(r,o){if(1&r&&(t.YNc(0,d,13,8,"section",0),t.YNc(1,v,4,0,"ng-template",null,1,t.W1O)),2&r){const n=t.MAs(2);t.Q6J("ngIf",o.productsAdded)("ngIfElse",n)}},dependencies:[u.ez,u.sg,u.O5,u.H9,m.rH],styles:[".clear[_ngcontent-%COMP%]{border:1px solid #0aad0a;border-radius:5px;padding:0 5px}.clear[_ngcontent-%COMP%]:hover{background-color:brown;border:0px;color:#fff}.update[_ngcontent-%COMP%]{background-color:#0aad0a;padding:5px 10px;border:1px solid #ccc;border-radius:5px;color:#fff;cursor:pointer;transition:background-color .5s}.update[_ngcontent-%COMP%]:disabled{cursor:not-allowed;background-color:#ccc}.update[_ngcontent-%COMP%]:disabled:hover{background-color:#ccc}.update[_ngcontent-%COMP%]:hover{background-color:#11bd11}"]})}return c})()},6286:(h,p,s)=>{s.d(p,{N:()=>C});var u=s(5619),m=s(4769),t=s(9862);let C=(()=>{class a{constructor(i){this._HttpClient=i,this.cartNumber=new u.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart"}addProduct(i){return this._HttpClient.post(this.baseUrl,{productId:i})}getUserCart(){return this._HttpClient.get(this.baseUrl)}updateCart(i,d){return this._HttpClient.put(this.baseUrl+`/${i}`,{count:d})}removeProduct(i){return this._HttpClient.delete(this.baseUrl+`/${i}`)}clearUserCart(){return this._HttpClient.delete(this.baseUrl)}checkoutToPay(i,d){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${i}?url=https://github.com/`,{shippingAddress:d})}static#t=this.\u0275fac=function(d){return new(d||a)(m.LFG(t.eN))};static#e=this.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);